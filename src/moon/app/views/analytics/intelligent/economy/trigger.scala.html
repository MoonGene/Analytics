@(selectedAppId: String, selectedApp: MobileApp, mobileApps: List[MobileApp], subPage: String, acc: Account, sessionData: SessionData, location: Option[String])

@common.analytics.frame(title = "Purchase Trigger - MoonGene - Realtime Mobile Analytics for Games and Apps!", selectedAppId = selectedAppId) {
    @analytics.body(selectedAppId = selectedAppId, allApps = mobileApps, activeTab = "intelligent", acc = acc, sessionData = sessionData, location = location) {

        @common.analytics.currentpath(selectedApp.name, Array("Intelligent", "Economy", subPage))

        <h1>Purchase Trigger</h1>
        <div class="innerLR">
            <div class="row-fluid">
                <div id="widget-query-filter" class="widget row-fluid widget-heading-simple widget-body-gray">
                @common.dataunavailable()
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12 dash">
                    <h4 class="heading">Pre-Purchase Events Flow</h4>
                    <div class="graph chart-white" id="purchasetrigger_flow" style="height: 500px;"></div>
                </div>
            </div>
        </div>

        <div class="separator bottom"></div>
        <div class="separator bottom"></div>
        <p class="separator text-center"><i class="icon-ellipsis-horizontal icon-3x"></i></p>

        <style>
            .node rect {
              cursor: move;
              fill-opacity: .9;
              shape-rendering: crispEdges;
            }

            .node text {
              pointer-events: none;
              text-shadow: 0 1px 0 #fff;
            }

            .link {
              fill: none;
              stroke: #000;
              stroke-opacity: .2;
            }

            .link:hover {
              stroke-opacity: .5;
            }
        </style>

        <script src="@routes.Assets.at("scripts/moongene/economy_trigger.js?123123")"></script>
        <script src="@routes.Assets.at("scripts/plugins/d3js/sankey.js")"></script>
    }
}